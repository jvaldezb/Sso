flowchart TB

    %% ===============================
    %% IDENTIDAD GLOBAL
    %% ===============================
    subgraph ID[Identidad en el SSO]
        direction TB
        U[Usuario Global]
        R0[Rol Global SSO]

        U --> R0
    end

    %% ===============================
    %% ROLES GLOBALES
    %% ===============================
    subgraph RG[Roles Globales del SSO]
        direction TB
        G1[SSO_SUPER_ADMIN]
        G2[SSO_ADMIN]
        G3[SSO_AUDITOR]

        R0 --> G1
        R0 --> G2
        R0 --> G3
    end

    %% ===============================
    %% SISTEMAS INTEGRADOS
    %% ===============================
    subgraph SYS[Sistemas Integrados]
        direction TB
        S1[PAT]
        S2[SISR]
        S3[Otros Sistemas]
    end

    %% ===============================
    %% ROLES POR SISTEMA
    %% ===============================
    subgraph RS[Roles por Sistema]
        direction TB
        P1[PAT_ADMIN]
        P2[PAT_USER]

        S1 --> P1
        S1 --> P2
    end

    %% ===============================
    %% ASIGNACIÃ“N DE ROLES
    %% ===============================
    U -.->|asignado a| S1
    U -.->|asignado a| S2

    U -.->|tiene| G1
    U -.->|tiene| P1

    %% ===============================
    %% ESTILOS DARK MODE
    %% ===============================
    classDef identity fill:#2c3e50,stroke:#95a5a6,stroke-width:2px,color:#ecf0f1,font-weight:bold;
    classDef global fill:#3b1f1f,stroke:#e74c3c,stroke-width:2px,color:#ecf0f1;
    classDef system fill:#3a2f1a,stroke:#f39c12,stroke-width:2px,color:#ecf0f1;
    classDef roleSystem fill:#1f3a2e,stroke:#2ecc71,stroke-width:2px,color:#ecf0f1;

    class U identity
    class R0 identity
    class G1,G2,G3 global
    class S1,S2,S3 system
    class P1,P2 roleSystem
